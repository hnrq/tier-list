(function(b,D){typeof exports=="object"&&typeof module!="undefined"?D(exports):typeof define=="function"&&define.amd?define(["exports"],D):(b=typeof globalThis!="undefined"?globalThis:b||self,D(b.draggable={}))})(this,function(b){"use strict";const D={mouse:0,drag:0,touch:100};function ws(e){const t={};if(e===void 0)return{...D};if(typeof e=="number"){for(const n in D)Object.prototype.hasOwnProperty.call(D,n)&&(t[n]=e);return t}return{...D,...e}}class N{constructor(t=[],n={}){this.dragging=!1,this.currentContainer=null,this.originalSource=null,this.startEvent=null,t instanceof NodeList||t instanceof Array?this.containers=[...t]:t instanceof Element&&(this.containers=[t]),this.options={...n},this.delay=ws(n.delay)}attach(){return this}detach(){return this}addContainer(...t){this.containers=[...this.containers,...t]}removeContainer(...t){this.containers=this.containers.filter(n=>!t.includes(n))}trigger(t,n){return t.dispatchEvent(new CustomEvent(n.type,{detail:n,bubbles:!0,cancelable:!0})),this.lastEvent=n,n}}const Ds=Element.prototype.matches||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector;function m(e,t){if(!e)return null;function n(s){return s&&(typeof t=="string"?Ds.call(s,t):t instanceof NodeList||t instanceof Array?[...t].includes(s):t instanceof Element?t===s:typeof t=="function"?t(s):null)}let r=e;do{if(n(r))return r;r=r.parentNode}while(r&&r!==document.body&&r!==document);return null}const xs=e=>requestAnimationFrame(()=>{requestAnimationFrame(e)}),xe=(e,t,n,r)=>Math.sqrt((n-e)**2+(r-t)**2),$=(e={})=>{const{touches:t,changedTouches:n}=e;return t&&t[0]||n&&n[0]},ht=Symbol("canceled"),Oe=class extends Event{constructor(e){super(e==null?void 0:e.type,{...e}),this[ht]=!1,this.data={...e}}get type(){return Object.getPrototypeOf(this).constructor.type}get cancelable(){return Object.getPrototypeOf(this).constructor.cancelable}cancel(){this[ht]=!0}canceled(){return Boolean(this[ht])}clone(e){return new Oe({...this.data,...e})}};let v=Oe;v.type="event",v.cancelable=!1;class O extends v{constructor(t){super(t)}get originalEvent(){return this.data.originalEvent}get clientX(){return this.data.clientX}get clientY(){return this.data.clientY}get target(){return this.data.target}get container(){return this.data.container}get originalSource(){return this.data.originalSource}get pressure(){return this.data.pressure}clone(t){return new O({...this.data,...t})}}const Me=class extends O{clone(e){return new Me({...this.data,...e})}};let _=Me;_.type="drag:start";const $e=class extends O{clone(e){return new $e({...this.data,...e})}};let L=$e;L.type="drag:move";const _e=class extends O{clone(e){return new _e({...this.data,...e})}};let F=_e;F.type="drag:stop";const Le=class extends O{clone(e){return new Le({...this.data,...e})}};let nt=Le;nt.type="drag:pressure";var Fe,Te,Ae,Xe,Ye,Pe;const gt=Symbol("onContextMenuWhileDragging"),ut=Symbol("onMouseDown"),pt=Symbol("onMouseMove"),mt=Symbol("onMouseUp"),Ne=Symbol("startDrag"),T=Symbol("onDistanceChange");function ze(e){e.preventDefault()}class Ie extends N{constructor(){super(...arguments),this.mouseDownTimeout=null,this.pageX=null,this.pageY=null,this[Fe]=t=>{if(t.button!==0||t.ctrlKey||t.metaKey)return;const n=m(t.target,this.containers);if(!n||this.options.handle&&t.target&&!m(t.target,this.options.handle))return;const r=m(t.target,this.options.draggable);if(!r)return;const{delay:s}=this,{pageX:o,pageY:i}=t;Object.assign(this,{pageX:o,pageY:i}),this.onMouseDownAt=Date.now(),this.startEvent=t,this.currentContainer=n,this.originalSource=r,document.addEventListener("mouseup",this[mt]),document.addEventListener("dragstart",ze),document.addEventListener("mousemove",this[T]),this.mouseDownTimeout=window.setTimeout(()=>{this[T]({pageX:this.pageX,pageY:this.pageY})},s.mouse)},this[Te]=()=>{const t=this.startEvent,n=this.currentContainer,r=this.originalSource,s=new _({clientX:t.clientX,clientY:t.clientY,target:t.target,container:n,originalSource:r,originalEvent:t});this.trigger(this.currentContainer,s),this.dragging=!s.canceled(),this.dragging&&(document.addEventListener("contextmenu",this[gt],!0),document.addEventListener("mousemove",this[pt]))},this[Ae]=t=>{const{pageX:n,pageY:r}=t,{distance:s}=this.options,{startEvent:o,delay:i}=this;if(Object.assign(this,{pageX:n,pageY:r}),!this.currentContainer)return;const l=Date.now()-this.onMouseDownAt,a=xe(o.pageX,o.pageY,n,r)||0;clearTimeout(this.mouseDownTimeout),l<i.mouse?document.removeEventListener("mousemove",this[T]):a>=s&&(document.removeEventListener("mousemove",this[T]),this[Ne]())},this[Xe]=t=>{if(!this.dragging)return;const n=document.elementFromPoint(t.clientX,t.clientY),r=new L({clientX:t.clientX,clientY:t.clientY,target:n,container:this.currentContainer,originalEvent:t});this.trigger(this.currentContainer,r)},this[Ye]=t=>{if(clearTimeout(this.mouseDownTimeout),t.button!==0||(document.removeEventListener("mouseup",this[mt]),document.removeEventListener("dragstart",ze),document.removeEventListener("mousemove",this[T]),!this.dragging))return;const n=document.elementFromPoint(t.clientX,t.clientY),r=new F({clientX:t.clientX,clientY:t.clientY,target:n,container:this.currentContainer,originalEvent:t});this.trigger(this.currentContainer,r),document.removeEventListener("contextmenu",this[gt],!0),document.removeEventListener("mousemove",this[pt]),this.currentContainer=null,this.dragging=!1,this.startEvent=null},this[Pe]=t=>{t.preventDefault()}}attach(){document.addEventListener("mousedown",this[ut],!0)}detach(){document.removeEventListener("mousedown",this[ut],!0)}}Fe=ut,Te=Ne,Ae=T,Xe=pt,Ye=mt,Pe=gt;var qe,Re,ke,Be,je;const ft=Symbol("onTouchStart"),z=Symbol("onTouchEnd"),bt=Symbol("onTouchMove"),We=Symbol("startDrag"),A=Symbol("onDistanceChange");let rt=!1;window.addEventListener("touchmove",e=>{!rt||e.preventDefault()},{passive:!1});function Ue(e){e.preventDefault(),e.stopPropagation()}class He extends N{constructor(){super(...arguments),this.currentScrollableParent=null,this.tapTimeout=null,this.touchMoved=!1,this.onTouchStartAt=null,this.pageX=null,this.pageY=null,this[qe]=t=>{const n=m(t.target,this.containers);if(!n||this.options.handle&&t.target&&!m(t.target,this.options.handle))return;const r=m(t.target,this.options.draggable);if(!r)return;const{distance:s=0}=this.options,{delay:o}=this,{pageX:i,pageY:l}=$(t);Object.assign(this,{pageX:i,pageY:l}),this.onTouchStartAt=Date.now(),this.startEvent=t,this.currentContainer=n,this.originalSource=r,document.addEventListener("touchend",this[z]),document.addEventListener("touchcancel",this[z]),document.addEventListener("touchmove",this[A]),n.addEventListener("contextmenu",Ue),s&&(rt=!0),this.tapTimeout=window.setTimeout(()=>{this[A](t)},o.touch)},this[Re]=()=>{const t=this.startEvent,n=this.currentContainer,r=this.originalSource,s=$(t),o=new _({clientX:s.pageX,clientY:s.pageY,target:t.target,container:n,originalSource:r,originalEvent:t});this.trigger(this.currentContainer,o),this.dragging=!o.canceled(),this.dragging&&document.addEventListener("touchmove",this[bt]),rt=this.dragging},this[ke]=t=>{const{distance:n}=this.options,{startEvent:r,delay:s}=this,o=$(r),i=$(t),l=Date.now()-this.onTouchStartAt,a=xe(o.pageX,o.pageY,i.pageX,i.pageY);Object.assign(this,i),clearTimeout(this.tapTimeout),l<s.touch?document.removeEventListener("touchmove",this[A]):a>=n&&(document.removeEventListener("touchmove",this[A]),this[We]())},this[Be]=t=>{if(!this.dragging)return;const{pageX:n,pageY:r}=$(t),s=document.elementFromPoint(n-window.scrollX,r-window.scrollY),o=new L({clientX:n,clientY:r,target:s,container:this.currentContainer,originalEvent:t});this.trigger(this.currentContainer,o)},this[je]=t=>{if(clearTimeout(this.tapTimeout),rt=!1,document.removeEventListener("touchend",this[z]),document.removeEventListener("touchcancel",this[z]),document.removeEventListener("touchmove",this[A]),this.currentContainer&&this.currentContainer.removeEventListener("contextmenu",Ue),!this.dragging)return;document.removeEventListener("touchmove",this[bt]);const{pageX:n,pageY:r}=$(t),s=document.elementFromPoint(n-window.scrollX,r-window.scrollY);t.preventDefault();const o=new F({clientX:n,clientY:r,target:s,container:this.currentContainer,originalEvent:t});this.trigger(this.currentContainer,o),this.currentContainer=null,this.dragging=!1,this.startEvent=null}}attach(){document.addEventListener("touchstart",this[ft])}detach(){document.removeEventListener("touchstart",this[ft])}}qe=ft,Re=We,ke=A,Be=bt,je=z;var Ve,Ge,Ke,Ze,Je,Qe;const vt=Symbol("onMouseDown"),st=Symbol("onMouseUp"),Et=Symbol("onDragStart"),St=Symbol("onDragOver"),yt=Symbol("onDragEnd"),Ct=Symbol("onDrop"),wt=Symbol("reset");class Os extends N{constructor(){super(...arguments),this.mouseDownTimeout=null,this.draggableElement=null,this.nativeDraggableElement=null,this[Ve]=t=>{t.dataTransfer.setData("text",""),t.dataTransfer.effectAllowed=this.options.type;const n=document.elementFromPoint(t.clientX,t.clientY),r=this.draggableElement;if(!r)return;const s=new _({clientX:t.clientX,clientY:t.clientY,originalSource:r,target:n,container:this.currentContainer,originalEvent:t});setTimeout(()=>{this.trigger(this.currentContainer,s),s.canceled()?this.dragging=!1:this.dragging=!0},0)},this[Ge]=t=>{if(!this.dragging)return;const n=document.elementFromPoint(t.clientX,t.clientY),r=this.currentContainer,s=new L({clientX:t.clientX,clientY:t.clientY,target:n,container:r,originalEvent:t});this.trigger(r,s),s.canceled()||(t.preventDefault(),t.dataTransfer.dropEffect=this.options.type)},this[Ke]=t=>{if(!this.dragging)return;document.removeEventListener("mouseup",this[st],!0);const n=document.elementFromPoint(t.clientX,t.clientY),r=this.currentContainer,s=new F({clientX:t.clientX,clientY:t.clientY,target:n,container:r,originalEvent:t});this.trigger(r,s),this.dragging=!1,this.startEvent=null,this[wt]()},this[Ze]=t=>{t.preventDefault()},this[Je]=t=>{if(t.target&&(t.target.form||t.target.contenteditable))return;const n=t.target;if(this.currentContainer=m(n,this.containers),!this.currentContainer||this.options.handle&&n&&!m(n,this.options.handle))return;const r=m(n,this.options.draggable);if(!r)return;const s=m(t.target,o=>o.draggable);s&&(s.draggable=!1,this.nativeDraggableElement=s),document.addEventListener("mouseup",this[st],!0),document.addEventListener("dragstart",this[Et],!1),document.addEventListener("dragover",this[St],!1),document.addEventListener("dragend",this[yt],!1),document.addEventListener("drop",this[Ct],!1),this.startEvent=t,this.mouseDownTimeout=setTimeout(()=>{r.draggable=!0,this.draggableElement=r},this.delay.drag)},this[Qe]=()=>{this[wt]()}}attach(){document.addEventListener("mousedown",this[vt],!0)}detach(){document.removeEventListener("mousedown",this[vt],!0)}[(Ve=Et,Ge=St,Ke=yt,Ze=Ct,Je=vt,Qe=st,wt)](){clearTimeout(this.mouseDownTimeout),document.removeEventListener("mouseup",this[st],!0),document.removeEventListener("dragstart",this[Et],!1),document.removeEventListener("dragover",this[St],!1),document.removeEventListener("dragend",this[yt],!1),document.removeEventListener("drop",this[Ct],!1),this.nativeDraggableElement&&(this.nativeDraggableElement.draggable=!0,this.nativeDraggableElement=null),this.draggableElement&&(this.draggableElement.draggable=!1,this.draggableElement=null)}}var tn,en,nn,rn,sn,on,an;const Dt=Symbol("onMouseForceWillBegin"),xt=Symbol("onMouseForceDown"),Ot=Symbol("onMouseDown"),Mt=Symbol("onMouseForceChange"),$t=Symbol("onMouseMove"),_t=Symbol("onMouseUp"),Ms=Symbol("onMouseForceGlobalChange");class $s extends N{constructor(){super(...arguments),this.mightDrag=!1,this[tn]=t=>{t.preventDefault(),this.mightDrag=!0},this[en]=t=>{if(this.dragging)return;const n=document.elementFromPoint(t.clientX,t.clientY),r=t.currentTarget;if(this.options.handle&&n&&!m(n,this.options.handle))return;const s=m(n,this.options.draggable);if(!s)return;const o=new _({clientX:t.clientX,clientY:t.clientY,target:n,container:r,originalSource:s,originalEvent:t});this.trigger(r,o),this.currentContainer=r,this.dragging=!o.canceled(),this.mightDrag=!1},this[nn]=t=>{if(!this.dragging)return;const n=new F({clientX:t.clientX,clientY:t.clientY,target:null,container:this.currentContainer,originalEvent:t});this.trigger(this.currentContainer,n),this.currentContainer=null,this.dragging=!1,this.mightDrag=!1},this[rn]=t=>{!this.mightDrag||(t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault())},this[sn]=t=>{if(!this.dragging)return;const n=document.elementFromPoint(t.clientX,t.clientY),r=new L({clientX:t.clientX,clientY:t.clientY,target:n,container:this.currentContainer,originalEvent:t});this.trigger(this.currentContainer,r)},this[on]=t=>{if(this.dragging)return;const n=t.target,r=t.currentTarget,s=new nt({pressure:t.webkitForce,clientX:t.clientX,clientY:t.clientY,target:n,container:r,originalEvent:t});this.trigger(r,s)},this[an]=t=>{if(!this.dragging)return;const n=t.target,r=new nt({pressure:t.webkitForce,clientX:t.clientX,clientY:t.clientY,target:n,container:this.currentContainer,originalEvent:t});this.trigger(this.currentContainer,r)}}attach(){for(const t of this.containers)t.addEventListener("webkitmouseforcewillbegin",this[Dt],!1),t.addEventListener("webkitmouseforcedown",this[xt],!1),t.addEventListener("mousedown",this[Ot],!0),t.addEventListener("webkitmouseforcechanged",this[Mt],!1);document.addEventListener("mousemove",this[$t]),document.addEventListener("mouseup",this[_t])}detach(){for(const t of this.containers)t.removeEventListener("webkitmouseforcewillbegin",this[Dt],!1),t.removeEventListener("webkitmouseforcedown",this[xt],!1),t.removeEventListener("mousedown",this[Ot],!0),t.removeEventListener("webkitmouseforcechanged",this[Mt],!1);document.removeEventListener("mousemove",this[$t]),document.removeEventListener("mouseup",this[_t])}}tn=Dt,en=xt,nn=_t,rn=Ot,sn=$t,on=Mt,an=Ms;var _s=Object.freeze(Object.defineProperty({__proto__:null,Sensor:N,MouseSensor:Ie,TouchSensor:He,DragSensor:Os,ForceTouchSensor:$s,SensorEvent:O,DragStartSensorEvent:_,DragMoveSensorEvent:L,DragStopSensorEvent:F,DragPressureSensorEvent:nt},Symbol.toStringTag,{value:"Module"}));class S{constructor(t){this.draggable=t}attach(){throw new Error("Not Implemented")}detach(){throw new Error("Not Implemented")}}const ln=class extends v{get dragEvent(){return this.data.dragEvent}clone(e){return new ln({...this.data,...e})}};let Lt=ln;Lt.type="collidable";const cn=class extends Lt{get collidingElement(){return this.data.collidingElement}clone(e){return new cn({...this.data,...e})}};let dn=cn;dn.type="collidable:in";const hn=class extends Lt{get collidingElement(){return this.data.collidingElement}clone(e){return new hn({...this.data,...e})}};let Ft=hn;Ft.type="collidable:out";var gn,un,pn;const Tt=Symbol("onDragMove"),At=Symbol("onDragStop"),mn=Symbol("onRequestAnimationFrame");class Ls extends S{constructor(){super(...arguments),this.currentlyCollidingElement=null,this.lastCollidingElement=null,this.currentAnimationFrame=null,this[gn]=t=>{const n=t.sensorEvent.target;this.currentAnimationFrame=requestAnimationFrame(this[mn](n)),this.currentlyCollidingElement&&t.cancel();const r=new dn({dragEvent:t,collidingElement:this.currentlyCollidingElement}),s=new Ft({dragEvent:t,collidingElement:this.lastCollidingElement}),o=Boolean(this.currentlyCollidingElement&&this.lastCollidingElement!==this.currentlyCollidingElement),i=Boolean(!this.currentlyCollidingElement&&this.lastCollidingElement);o?(this.lastCollidingElement&&this.draggable.trigger(s),this.draggable.trigger(r)):i&&this.draggable.trigger(s),this.lastCollidingElement=this.currentlyCollidingElement},this[un]=t=>{const n=this.currentlyCollidingElement||this.lastCollidingElement,r=new Ft({dragEvent:t,collidingElement:n});n&&this.draggable.trigger(r),this.lastCollidingElement=null,this.currentlyCollidingElement=null},this[pn]=t=>()=>{const n=this.getCollidables();this.currentlyCollidingElement=m(t,r=>n.includes(r))}}attach(){this.draggable.on("drag:move",this[Tt]).on("drag:stop",this[At])}detach(){this.draggable.off("drag:move",this[Tt]).off("drag:stop",this[At])}getCollidables(){const t=this.draggable.options.collidables;return typeof t=="string"?Array.prototype.slice.call(document.querySelectorAll(t)):t instanceof NodeList||t instanceof Array?Array.prototype.slice.call(t):t instanceof HTMLElement?[t]:typeof t=="function"?t():[]}}gn=Tt,un=At,pn=mn;var fn,bn,vn,En;const I=Symbol("onMirrorCreated"),ot=Symbol("onMirrorDestroy"),M=Symbol("onDragOver"),Sn=Symbol("resize"),yn={};class Fs extends S{constructor(t){super(t),this.lastWidth=0,this.lastHeight=0,this.mirror=null,this.getOptions=()=>{var n;return(n=this.draggable.options.resizeMirror)!=null?n:{}},this[fn]=({mirror:n})=>{this.mirror=n},this[bn]=()=>{this.mirror=null},this[vn]=n=>{this[Sn](n)},this[En]=({overContainer:n,over:r})=>{requestAnimationFrame(()=>{if(!this.mirror.parentNode)return;this.mirror.parentNode!==n&&n.appendChild(this.mirror);const s=r!=null?r:this.draggable.getDraggableElementsForContainer(n)[0];!s||xs(()=>{const o=s.getBoundingClientRect();this.lastHeight===o.height&&this.lastWidth===o.width||(this.mirror.style.width=`${o.width}px`,this.mirror.style.height=`${o.height}px`,this.lastWidth=o.width,this.lastHeight=o.height)})})},this.options={...yn,...this.getOptions()},this[I]=this[I].bind(this),this[ot]=this[ot].bind(this),this[M]=this[M].bind(this)}attach(){this.draggable.on("mirror:created",this[I]).on("drag:over",this[M]).on("drag:over:container",this[M])}detach(){this.draggable.off("mirror:created",this[I]).off("mirror:destroy",this[ot]).off("drag:over",this[M]).off("drag:over:container",this[M])}}fn=I,bn=ot,vn=M,En=Sn;const Cn=class extends v{get dragEvent(){return this.data.dragEvent}get snappable(){return this.data.snappable}clone(e){return new Cn({...this.data,...e})}};let Xt=Cn;Xt.type="snap";const wn=class extends Xt{clone(e){return new wn({...this.data,...e})}};let Yt=wn;Yt.type="snap:in",Yt.cancelable=!0;const Dn=class extends Xt{clone(e){return new Dn({...this.data,...e})}};let Pt=Dn;Pt.type="snap:out",Pt.cancelable=!0;var xn,On,Mn,$n,_n,Ln;const Nt=Symbol("onDragStart"),zt=Symbol("onDragStop"),q=Symbol("onDragOver"),R=Symbol("onDragOut"),It=Symbol("onMirrorCreated"),qt=Symbol("onMirrorDestroy");class Ts extends S{constructor(){super(...arguments),this.firstSource=null,this.mirror=null,this[xn]=t=>{t.canceled()||(this.firstSource=t.source)},this[On]=()=>{this.firstSource=null},this[Mn]=t=>{var s,o;if(t.canceled())return;const n=(s=t.source)!=null?s:t.dragEvent.source;if(n===this.firstSource){this.firstSource=null;return}const r=new Yt({dragEvent:t,snappable:(o=t.over)!=null?o:t.droppable});this.draggable.trigger(r),!r.canceled()&&(this.mirror&&(this.mirror.style.display="none"),n.classList.remove(...this.draggable.getClassNamesFor("source:dragging")),n.classList.add(...this.draggable.getClassNamesFor("source:placed")),setTimeout(()=>{n==null||n.classList.remove(...this.draggable.getClassNamesFor("source:placed"))},this.draggable.options.placedTimeout))},this[$n]=t=>{var s,o;if(t.canceled())return;const n=(s=t.source)!=null?s:t.dragEvent.source,r=new Pt({dragEvent:t,snappable:(o=t.over)!=null?o:t.droppable});this.draggable.trigger(r),!r.canceled()&&(this.mirror&&(this.mirror.style.display=""),n.classList.add(...this.draggable.getClassNamesFor("source:dragging")))},this[_n]=({mirror:t})=>{this.mirror=t},this[Ln]=()=>{this.mirror=null}}attach(){this.draggable.on("drag:start",this[Nt]).on("drag:stop",this[zt]).on("drag:over",this[q]).on("drag:out",this[R]).on("droppable:over",this[q]).on("droppable:out",this[R]).on("mirror:created",this[It]).on("mirror:destroy",this[qt])}detach(){this.draggable.off("drag:start",this[Nt]).off("drag:stop",this[zt]).off("drag:over",this[q]).off("drag:out",this[R]).off("droppable:over",this[q]).off("droppable:out",this[R]).off("mirror:created",this[It]).off("mirror:destroy",this[qt])}}xn=Nt,On=zt,Mn=q,$n=R,_n=It,Ln=qt;var Fn;const k=Symbol("onSortableSorted"),Tn={duration:150,easingFunction:"ease-in-out",horizontal:!1};function An(e){var t;e.target.style.transition="",e.target.style.pointerEvents="",(t=e.target)==null||t.removeEventListener("transitionend",An)}function Xn(e,t,{duration:n,easingFunction:r,horizontal:s}){for(const o of[e,t])o.style.pointerEvents="none";if(s){const o=e.offsetWidth;e.style.transform=`translate3d(${o}px, 0, 0)`,t.style.transform=`translate3d(-${o}px, 0, 0)`}else{const o=e.offsetHeight;e.style.transform=`translate3d(0, ${o}px, 0)`,t.style.transform=`translate3d(0, -${o}px, 0)`}requestAnimationFrame(()=>{for(const o of[e,t])o.addEventListener("transitionend",An),o.style.transition=`transform ${n}ms ${r}`,o.style.transform=""})}class As extends S{constructor(t){super(t),this.getOptions=()=>{var n;return(n=this.draggable.options.swapAnimation)!=null?n:{}},this[Fn]=({oldIndex:n,newIndex:r,dragEvent:s})=>{const{source:o,over:i}=s;cancelAnimationFrame(this.lastAnimationFrame),this.lastAnimationFrame=requestAnimationFrame(()=>{n>=r?Xn(o,i,this.options):Xn(i,o,this.options)})},this.options={...Tn,...this.getOptions()},this[k]=this[k].bind(this)}attach(){this.draggable.on("sortable:sorted",this[k])}detach(){this.draggable.off("sortable:sorted",this[k])}}Fn=k;var Yn,Pn;const B=Symbol("onSortableSorted"),j=Symbol("onSortableSort"),Nn={duration:150,easingFunction:"ease-in-out"};function zn(e){var t;e.target.style.transition="",e.target.style.pointerEvents="",(t=e.target)==null||t.removeEventListener("transitionend",zn)}function Xs({from:e,to:t},{duration:n,easingFunction:r}){const s=e.domEl,o=e.offsetLeft-t.offsetLeft,i=e.offsetTop-t.offsetTop;s.style.pointerEvents="none",s.style.transform=`translate3d(${o}px, ${i}px, 0)`,requestAnimationFrame(()=>{s.addEventListener("transitionend",zn),s.style.transition=`transform ${n}ms ${r}`,s.style.transform=""})}class Ys extends S{constructor(t){super(t),this.lastElements=[],this.getOptions=()=>{var n;return(n=this.draggable.options.sortAnimation)!=null?n:{}},this[Yn]=n=>{const{sourceContainer:r}=n.dragEvent,s=this.draggable.getDraggableElementsForContainer(r);this.lastElements=[...s].map(o=>({domEl:o,offsetTop:o.offsetTop,offsetLeft:o.offsetLeft}))},this[Pn]=({oldIndex:n,newIndex:r})=>{if(n===r)return;const s=[];let o,i,l;n>r?(o=r,i=n-1,l=1):(o=n+1,i=r,l=-1);for(let a=o;a<=i;a++){const h=this.lastElements[a],u=this.lastElements[a+l];s.push({from:h,to:u})}cancelAnimationFrame(this.lastAnimationFrame),this.lastAnimationFrame=requestAnimationFrame(()=>{s.forEach(a=>Xs(a,this.options))})},this.options={...Nn,...this.getOptions()},this[B]=this[B].bind(this),this[j]=this[j].bind(this)}attach(){this.draggable.on("sortable:sort",this[j]),this.draggable.on("sortable:sorted",this[B])}detach(){this.draggable.off("sortable:sort",this[j]),this.draggable.off("sortable:sorted",this[B])}}Yn=j,Pn=B;var Ps=Object.freeze(Object.defineProperty({__proto__:null,Collidable:Ls,ResizeMirror:Fs,defaultResizeMirrorOptions:yn,Snappable:Ts,SwapAnimation:As,defaultSwapAnimationOptions:Tn,SortAnimation:Ys,defaultSortAnimationOptions:Nn},Symbol.toStringTag,{value:"Module"}));const In=class extends v{constructor(e){super(e)}get source(){return this.data.source}get originalSource(){return this.data.originalSource}get mirror(){return this.data.mirror}get sourceContainer(){return this.data.sourceContainer}get sensorEvent(){return this.data.sensorEvent}get originalEvent(){return this.sensorEvent?this.sensorEvent.originalEvent:null}get detail(){return this.detail}clone(e){return new In({...this.data,...e})}};let y=In;y.type="drag";const qn=class extends y{clone(e){return new qn({...this.data,...e})}};let Rt=qn;Rt.type="drag:start",Rt.cancelable=!0;const Rn=class extends y{clone(e){return new Rn({...this.data,...e})}};let kn=Rn;kn.type="drag:move";const Bn=class extends y{get overContainer(){return this.data.overContainer}get over(){return this.data.over}clone(e){return new Bn({...this.data,...e})}};let kt=Bn;kt.type="drag:over",kt.cancelable=!0;const jn=class extends y{get overContainer(){return this.data.overContainer}get over(){return this.data.over}clone(e){return new jn({...this.data,...e})}};let Wn=jn;Wn.type="drag:out";const Un=class extends y{get overContainer(){return this.data.overContainer}get over(){return this.data.over}clone(e){return new Un({...this.data,...e})}};let Hn=Un;Hn.type="drag:over:container";const Vn=class extends y{get overContainer(){return this.data.overContainer}clone(e){return new Vn({...this.data,...e})}};let Gn=Vn;Gn.type="drag:out:container";const Kn=class extends y{get pressure(){return this.data.pressure}clone(e){return new Kn({...this.data,...e})}};let Zn=Kn;Zn.type="drag:pressure";const Jn=class extends y{clone(e){return new Jn({...this.data,...e})}};let Bt=Jn;Bt.type="drag:stop",Bt.cancelable=!0;const Qn=class extends y{clone(e){return new Qn({...this.data,...e})}};let tr=Qn;tr.type="drag:stopped";const er=class extends v{get draggable(){return this.data.draggable}clone(e){return new er({...this.data,...e})}};let jt=er;jt.type="draggable";const nr=class extends jt{clone(e){return new nr({...this.data,...e})}};let rr=nr;rr.type="draggable:initialize";const sr=class extends jt{clone(e){return new sr({...this.data,...e})}};let or=sr;or.type="draggable:destroy";class Ns{constructor(){this.callbacks={}}on(t,...n){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(...n),this}off(t,n){return this.callbacks[t]?([...this.callbacks[t]].forEach((s,o)=>{n===s&&this.callbacks[t].splice(o,1)}),this):null}trigger(t){if(!this.callbacks[t.type])return null;const n=[...this.callbacks[t.type]],r=[];for(let s=n.length-1;s>=0;s--){const o=n[s];try{o(t)}catch(i){r.push(i)}}return r.length&&console.error(`Draggable caught errors while triggering '${t.type}'`,r),this}}var ir,ar;const lr=Symbol("onInitialize"),cr=Symbol("onDestroy"),dr=Symbol("announceEvent"),Wt=Symbol("announceMessage"),zs="aria-relevant",Is="aria-atomic",qs="aria-live",Rs="role",ks={expire:7e3};function Bs(){const e=document.createElement("div");return e.setAttribute("id","draggable-live-region"),e.setAttribute(zs,"additions"),e.setAttribute(Is,"true"),e.setAttribute(qs,"assertive"),e.setAttribute(Rs,"log"),e.style.position="fixed",e.style.width="1px",e.style.height="1px",e.style.top="-1px",e.style.overflow="hidden",e}const Ut=Bs();function js(e,{expire:t}){const n=document.createElement("div");return n.textContent=e,Ut.appendChild(n),setTimeout(()=>{Ut.removeChild(n)},t)}document.addEventListener("DOMContentLoaded",()=>{document.body.appendChild(Ut)});class Ws extends S{constructor(t){super(t),this.getOptions=()=>{var n;return(n=this.draggable.options.announcements)!=null?n:{}},this[ir]=()=>{this.draggable.trigger=n=>{try{this[dr](n)}finally{this.originalTriggerMethod.call(this.draggable,n)}return this.draggable}},this[ar]=()=>{this.draggable.trigger=this.originalTriggerMethod},this.options={...ks,...this.getOptions()},this.originalTriggerMethod=this.draggable.trigger}attach(){this.draggable.on("draggable:initialize",this[lr])}detach(){this.draggable.off("draggable:destroy",this[cr])}[dr](t){const n=this.options[t.type];n&&typeof n=="string"&&this[Wt](n),n&&typeof n=="function"&&this[Wt](n(t))}[Wt](t){js(t,{expire:this.options.expire})}}ir=lr,ar=cr;var hr,gr;const Ht=Symbol("onInitialize"),it=Symbol("onDestroy"),Us={},Vt=[];function Hs(e){Boolean(!e.getAttribute("tabindex")&&e.tabIndex===-1)&&(Vt.push(e),e.tabIndex=0)}function Vs(e){const t=Vt.indexOf(e);t!==-1&&(e.tabIndex=-1,Vt.splice(t,1))}class Gs extends S{constructor(t){super(t),this.getOptions=()=>{var n;return(n=this.draggable.options.focusable)!=null?n:{}},this.getElements=()=>[...this.draggable.containers,...this.draggable.getDraggableElements()],this[hr]=()=>{requestAnimationFrame(()=>{this.getElements().forEach(n=>Hs(n))})},this[gr]=()=>{requestAnimationFrame(()=>{this.getElements().forEach(n=>Vs(n))})},this.options={...Us,...this.getOptions()}}attach(){this.draggable.on("draggable:initialize",this[Ht]).on("draggable:destroy",this[it])}detach(){this.draggable.off("draggable:initialize",this[Ht]).off("draggable:destroy",this[it]),this[it]()}}hr=Ht,gr=it;class x extends v{get source(){return this.data.source}get originalSource(){return this.data.originalSource}get sourceContainer(){return this.data.sourceContainer}get sensorEvent(){return this.data.sensorEvent}get dragEvent(){return this.data.dragEvent}get originalEvent(){return this.sensorEvent?this.sensorEvent.originalEvent:null}clone(t){return new x({...this.data,...t})}}const ur=class extends x{clone(e){return new ur({...this.data,...e})}};let pr=ur;pr.type="mirror:create";const mr=class extends x{get mirror(){return this.data.mirror}clone(e){return new mr({...this.data,...e})}};let fr=mr;fr.type="mirror:created";const br=class extends x{get mirror(){return this.data.mirror}clone(e){return new br({...this.data,...e})}};let vr=br;vr.type="mirror:attached";const Er=class extends x{get mirror(){return this.data.mirror}get passedThreshX(){return this.data.passedThreshX}get passedThreshY(){return this.data.passedThreshY}clone(e){return new Er({...this.data,...e})}};let Gt=Er;Gt.type="mirror:move",Gt.cancelable=!0;const Sr=class extends x{get mirror(){return this.data.mirror}get passedThreshX(){return this.data.passedThreshX}get passedThreshY(){return this.data.passedThreshY}clone(e){return new Sr({...this.data,...e})}};let yr=Sr;yr.type="mirror:moved";const Cr=class extends x{get mirror(){return this.data.mirror}clone(e){return new Cr({...this.data,...e})}};let Kt=Cr;Kt.type="mirror:destroy",Kt.cancelable=!0;var wr,Dr,xr,Or,Mr,$r;const Zt=Symbol("onDragStart"),Jt=Symbol("onDragMove"),Qt=Symbol("onDragStop"),te=Symbol("onMirrorCreated"),ee=Symbol("onMirrorMove"),ne=Symbol("onScroll"),_r=Symbol("getAppendableContainer"),Ks={constrainDimensions:!1,xAxis:!0,yAxis:!0,cursorOffsetX:null,cursorOffsetY:null,thresholdX:null,thresholdY:null};function X(e,{withFrame:t=!1}={}){return new Promise((n,r)=>{t?requestAnimationFrame(()=>{e(n,r)}):e(n,r)})}function Zs({source:e,...t}){return X(n=>{const r=e.getBoundingClientRect();n({source:e,sourceRect:r,...t})})}function Js({sensorEvent:e,sourceRect:t,options:n,...r}){return X(s=>{const o=n.cursorOffsetY===null?e.clientY-t.top:n.cursorOffsetY,i=n.cursorOffsetX===null?e.clientX-t.left:n.cursorOffsetX;s({sensorEvent:e,sourceRect:t,mirrorOffset:{top:o,left:i},options:n,...r})})}function Qs({mirror:e,source:t,options:n,...r}){return X(s=>{let o,i;if(n.constrainDimensions){const l=getComputedStyle(t);o=l.getPropertyValue("height"),i=l.getPropertyValue("width")}e.style.display=null,e.style.position="fixed",e.style.pointerEvents="none",e.style.top=0,e.style.left=0,e.style.margin=0,n.constrainDimensions&&(e.style.height=o,e.style.width=i),s({mirror:e,source:t,options:n,...r})})}function to({mirror:e,mirrorClasses:t,...n}){return X(r=>{e.classList.add(...t),r({mirror:e,mirrorClasses:t,...n})})}function eo({mirror:e,...t}){return X(n=>{e.removeAttribute("id"),delete e.id,n({mirror:e,...t})})}function Lr({withFrame:e=!1,initial:t=!1}={}){return({mirror:n,sensorEvent:r,mirrorOffset:s,initialY:o,initialX:i,scrollOffset:l,options:a,passedThreshX:h,passedThreshY:u,lastMovedX:c,lastMovedY:d,...g})=>X(p=>{var C,E,P,dt;const f={mirror:n,sensorEvent:r,mirrorOffset:s,options:a,...g};if(s){const tt=h?Math.round((r.clientX-s.left-l.x)/((C=a.thresholdX)!=null?C:1))*((E=a.thresholdX)!=null?E:1):Math.round(c),et=u?Math.round((r.clientY-s.top-l.y)/((P=a.thresholdY)!=null?P:1))*((dt=a.thresholdY)!=null?dt:1):Math.round(d),{xAxis:w,yAxis:_o}=a;n.style.transform=`translate3d(${w||t?tt:i}px, ${_o||t?et:o}px, 0)`,t&&(f.initialX=tt,f.initialY=et),f.lastMovedX=tt,f.lastMovedY=et}p(f)},{withFrame:e})}const no=e=>/^drag/.test(e.originalEvent.type);class ro extends S{constructor(t){super(t),this.scrollOffset={x:0,y:0},this.initialScrollOffset={x:0,y:0},this.getOptions=()=>{var n;return(n=this.draggable.options.mirror)!=null?n:{}},this[wr]=n=>{if(n.canceled())return;"ontouchstart"in window&&document.addEventListener("scroll",this[ne],!0),this.initialScrollOffset={x:window.scrollX,y:window.scrollY};const{source:r,originalSource:s,sourceContainer:o,sensorEvent:i}=n;this.lastMirrorMovedClient={x:i.clientX,y:i.clientY};const l=new pr({source:r,originalSource:s,sourceContainer:o,sensorEvent:i,dragEvent:n});if(this.draggable.trigger(l),no(i)||l.canceled())return;const a=this[_r](r)||o;this.mirror=r.cloneNode(!0),this.mirror.setAttribute("role","dragmirror");const h=new fr({source:r,originalSource:s,sourceContainer:o,sensorEvent:i,dragEvent:n,originalEvent:n.originalEvent,mirror:this.mirror}),u=new vr({source:r,originalSource:s,sourceContainer:o,sensorEvent:i,dragEvent:n,mirror:this.mirror});this.draggable.trigger(h),a.appendChild(this.mirror),this.draggable.trigger(u)},this[Dr]=n=>{if(!this.mirror||n.canceled())return;const{source:r,originalSource:s,sourceContainer:o,sensorEvent:i,originalEvent:l}=n;let a=!0,h=!0;const{thresholdX:u,thresholdY:c}=this.options;if(u||c){const{x:g,y:p}=this.lastMirrorMovedClient;if(Math.abs(g-i.clientX)<u?a=!1:this.lastMirrorMovedClient.x=i.clientX,Math.abs(p-i.clientY)<c?h=!1:this.lastMirrorMovedClient.y=i.clientY,!a&&!h)return}const d=new Gt({source:r,originalSource:s,sourceContainer:o,sensorEvent:i,dragEvent:n,originalEvent:l,mirror:this.mirror,passedThreshX:a,passedThreshY:h});this.draggable.trigger(d)},this[xr]=n=>{if("ontouchstart"in window&&document.removeEventListener("scroll",this[ne],!0),this.initialScrollOffset={x:0,y:0},this.scrollOffset={x:0,y:0},!this.mirror)return;const{source:r,sourceContainer:s,sensorEvent:o}=n,i=new Kt({source:r,mirror:this.mirror,sourceContainer:s,sensorEvent:o,dragEvent:n});this.draggable.trigger(i),i.canceled()||this.mirror.remove()},this[Or]=()=>{this.scrollOffset={x:window.scrollX-this.initialScrollOffset.x,y:window.scrollY-this.initialScrollOffset.y}},this[Mr]=({mirror:n,source:r,sensorEvent:s})=>{const o=this.draggable.getClassNamesFor("mirror"),i=({mirrorOffset:a,initialX:h,initialY:u,...c})=>(this.mirrorOffset=a,this.initialX=h,this.initialY=u,this.lastMovedX=h,this.lastMovedY=u,{mirrorOffset:a,initialX:h,initialY:u,...c});n.style.display="none";const l={mirror:n,source:r,sensorEvent:s,mirrorClasses:o,scrollOffset:this.scrollOffset,options:this.options,passedThreshX:!0,passedThreshY:!0};return Promise.resolve(l).then(Zs).then(Js).then(Qs).then(to).then(Lr({initial:!0})).then(eo).then(i)},this[$r]=n=>{if(n.canceled())return null;const r=({lastMovedX:i,lastMovedY:l,...a})=>(this.lastMovedX=i,this.lastMovedY=l,{lastMovedX:i,lastMovedY:l,...a}),s=i=>{const l=new yr({source:n.source,originalSource:n.originalSource,sourceContainer:n.sourceContainer,sensorEvent:n.sensorEvent,dragEvent:n.dragEvent,mirror:this.mirror,passedThreshX:n.passedThreshX,passedThreshY:n.passedThreshY});return this.draggable.trigger(l),i},o={mirror:n.mirror,sensorEvent:n.sensorEvent,passedThreshX:n.passedThreshX,passedThreshY:n.passedThreshY,mirrorOffset:this.mirrorOffset,options:this.options,scrollOffset:this.scrollOffset,initialX:this.initialX,initialY:this.initialY,lastMovedX:this.lastMovedX,lastMovedY:this.lastMovedY};return Promise.resolve(o).then(Lr({withFrame:!0})).then(r).then(s)},this.options={...Ks,...this.getOptions()},this.initialScrollOffset={x:window.scrollX,y:window.scrollY}}attach(){this.draggable.on("drag:start",this[Zt]).on("drag:move",this[Jt]).on("drag:stop",this[Qt]).on("mirror:created",this[te]).on("mirror:move",this[ee])}detach(){this.draggable.off("drag:start",this[Zt]).off("drag:move",this[Jt]).off("drag:stop",this[Qt]).off("mirror:created",this[te]).off("mirror:move",this[ee])}[(wr=Zt,Dr=Jt,xr=Qt,Or=ne,Mr=te,$r=ee,_r)](t){const{appendTo:n}=this.options;return typeof n=="string"?document.querySelector(n):n instanceof HTMLElement?n:typeof n=="function"?n(t):t.parentNode}}var Fr,Tr,Ar,Xr;const re=Symbol("onDragStart"),se=Symbol("onDragMove"),oe=Symbol("onDragStop"),ie=Symbol("scroll"),so={speed:6,sensitivity:50,scrollableElements:[]},ae=()=>{var e;return(e=document.scrollingElement)!=null?e:document.documentElement};function oo(e){const t=/(auto|scroll)/,n=getComputedStyle(e,null),r=n.getPropertyValue("overflow")+n.getPropertyValue("overflow-y")+n.getPropertyValue("overflow-x");return t.test(r)}function io(e){return getComputedStyle(e).getPropertyValue("position")==="static"}function ao(e){if(!e)return ae();const t=getComputedStyle(e).getPropertyValue("position"),n=t==="absolute",r=m(e,s=>n&&io(s)?!1:oo(s));return t==="fixed"||!r?ae():r}class lo extends S{constructor(t){super(t),this.currentMousePosition=null,this.scrollAnimationFrame=null,this.scrollableElement=null,this.findScrollableElementFrame=null,this.getOptions=()=>{var n;return(n=this.draggable.options.scrollable)!=null?n:{}},this.hasDefinedScrollableElements=()=>Boolean(this.options.scrollableElements.length!==0),this[Fr]=n=>{this.findScrollableElementFrame=requestAnimationFrame(()=>{this.scrollableElement=this.getScrollableElement(n.source)})},this[Tr]=n=>{if(this.findScrollableElementFrame=requestAnimationFrame(()=>{this.scrollableElement=this.getScrollableElement(n.sensorEvent.target)}),!this.scrollableElement)return;const r=n.sensorEvent,s={x:0,y:0};"ontouchstart"in window&&(s.y=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,s.x=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),this.currentMousePosition={clientX:r.clientX-s.x,clientY:r.clientY-s.y},this.scrollAnimationFrame=requestAnimationFrame(this[ie])},this[Ar]=()=>{cancelAnimationFrame(this.scrollAnimationFrame),cancelAnimationFrame(this.findScrollableElementFrame),this.scrollableElement=null,this.scrollAnimationFrame=null,this.findScrollableElementFrame=null,this.currentMousePosition=null},this[Xr]=()=>{if(!this.scrollableElement||!this.currentMousePosition)return;cancelAnimationFrame(this.scrollAnimationFrame);const{speed:n,sensitivity:r}=this.options,s=this.scrollableElement.getBoundingClientRect(),o=s.bottom>window.innerHeight,l=s.top<0||o,a=ae(),h=this.scrollableElement,u=this.currentMousePosition.clientX,c=this.currentMousePosition.clientY;if(h!==document.body&&h!==document.documentElement&&!l){const{offsetHeight:d,offsetWidth:g}=h;s.top+d-c<r?h.scrollTop+=n:c-s.top<r&&(h.scrollTop-=n),s.left+g-u<r?h.scrollLeft+=n:u-s.left<r&&(h.scrollLeft-=n)}else{const{innerHeight:d,innerWidth:g}=window;c<r?a.scrollTop-=n:d-c<r&&(a.scrollTop+=n),u<r?a.scrollLeft-=n:g-u<r&&(a.scrollLeft+=n)}this.scrollAnimationFrame=requestAnimationFrame(this[ie])},this.options={...so,...this.getOptions()}}attach(){this.draggable.on("drag:start",this[re]).on("drag:move",this[se]).on("drag:stop",this[oe])}detach(){this.draggable.off("drag:start",this[re]).off("drag:move",this[se]).off("drag:stop",this[oe])}getScrollableElement(t){return this.hasDefinedScrollableElements()?m(t,this.options.scrollableElements)||document.documentElement:ao(t)}}Fr=re,Tr=se,Ar=oe,Xr=ie;var Yr,Pr,Nr,zr,Ir;const le=Symbol("onDragStart"),at=Symbol("onDragMove"),W=Symbol("onDragStop"),U=Symbol("onDragPressure"),H=Symbol("dragStop"),co={"drag:start":e=>`Picked up ${e.source.textContent.trim()||e.source.id||"draggable element"}`,"drag:stop":e=>`Released ${e.source.textContent.trim()||e.source.id||"draggable element"}`},ho={"container:dragging":"draggable-container--is-dragging","source:dragging":"draggable-source--is-dragging","source:placed":"draggable-source--placed","container:placed":"draggable-container--placed","body:dragging":"draggable--is-dragging","draggable:over":"draggable--over","container:over":"draggable-container--over","source:original":"draggable--original",mirror:"draggable-mirror"},go={draggable:".draggable-source",handle:null,delay:{},distance:0,placedTimeout:800,plugins:[],sensors:[],exclude:{plugins:[],sensors:[]}},lt=e=>e.detail;function qr(e,t){e.style.webkitUserSelect=t,e.style.mozUserSelect=t,e.style.msUserSelect=t,e.style.oUserSelect=t,e.style.userSelect=t}const ce=class{constructor(e=[document.body],t={}){var o,i,l,a,h,u;if(this.emitter=new Ns,this.dragging=!1,this.plugins=[],this.sensors=[],this.getClassNameFor=c=>this.getClassNamesFor(c)[0],this.getClassNamesFor=c=>{const d=this.options.classes[c];return d instanceof Array?d:typeof d=="string"?[d]:[]},this.isDragging=()=>Boolean(this.dragging),this.getDraggableElements=()=>this.containers.reduce((c,d)=>[...c,...this.getDraggableElementsForContainer(d)],[]),this.getDraggableElementsForContainer=c=>[...c.querySelectorAll(this.options.draggable)].filter(g=>g!==this.originalSource&&g!==this.mirror),this[Yr]=c=>{const d=lt(c),{target:g,container:p,originalSource:f}=d;if(!this.containers.includes(p))return;if(this.options.handle&&g&&!m(g,this.options.handle)){d.cancel();return}this.originalSource=f,this.sourceContainer=p,this.lastPlacedSource&&this.lastPlacedContainer&&(clearTimeout(this.placedTimeoutID),this.lastPlacedSource.classList.remove(...this.getClassNamesFor("source:placed")),this.lastPlacedContainer.classList.remove(...this.getClassNamesFor("container:placed"))),this.source=this.originalSource.cloneNode(!0),this.originalSource.parentNode.insertBefore(this.source,this.originalSource),this.originalSource.style.display="none";const C=new Rt({source:this.source,originalSource:this.originalSource,sourceContainer:p,sensorEvent:d});if(this.trigger(C),this.dragging=!C.canceled(),C.canceled()){this.source.remove(),this.originalSource.style.display=null;return}this.originalSource.classList.add(...this.getClassNamesFor("source:original")),this.source.classList.add(...this.getClassNamesFor("source:dragging")),this.sourceContainer.classList.add(...this.getClassNamesFor("container:dragging")),document.body.classList.add(...this.getClassNamesFor("body:dragging")),qr(document.body,"none"),requestAnimationFrame(()=>{const P=lt(c).clone({target:this.source});this[at]({...c,detail:P})})},this[Pr]=c=>{if(!this.dragging)return;const d=lt(c),{container:g}=d;let p=d.target;const f=new kn({source:this.source,originalSource:this.originalSource,sourceContainer:g,sensorEvent:d});this.trigger(f),f.canceled()&&d.cancel(),p=m(p,this.options.draggable);const C=m(d.target,this.containers),E=d.overContainer||C,P=this.currentOverContainer&&E!==this.currentOverContainer,dt=this.currentOver&&p!==this.currentOver,tt=E&&this.currentOverContainer!==E,et=C&&p&&this.currentOver!==p;if(dt){const w=new Wn({source:this.source,originalSource:this.originalSource,sourceContainer:g,sensorEvent:d,over:this.currentOver,overContainer:this.currentOverContainer});this.currentOver.classList.remove(...this.getClassNamesFor("draggable:over")),this.currentOver=null,this.trigger(w)}if(P){const w=new Gn({source:this.source,originalSource:this.originalSource,sourceContainer:g,sensorEvent:d,overContainer:this.currentOverContainer});this.currentOverContainer.classList.remove(...this.getClassNamesFor("container:over")),this.currentOverContainer=null,this.trigger(w)}if(tt){E.classList.add(...this.getClassNamesFor("container:over"));const w=new Hn({source:this.source,originalSource:this.originalSource,sourceContainer:g,sensorEvent:d,overContainer:E});this.currentOverContainer=E,this.trigger(w)}if(et){p.classList.add(...this.getClassNamesFor("draggable:over"));const w=new kt({source:this.source,originalSource:this.originalSource,sourceContainer:g,sensorEvent:d,overContainer:E,over:p});this.currentOver=p,this.trigger(w)}},this[Nr]=c=>{if(!this.dragging)return;this.dragging=!1;const d=new Bt({source:this.source,originalSource:this.originalSource,sensorEvent:c?c.sensorEvent:null,sourceContainer:this.sourceContainer});this.trigger(d),d.canceled()||this.source.parentNode.insertBefore(this.originalSource,this.source),this.source.remove(),this.originalSource.style.display="",this.source.classList.remove(...this.getClassNamesFor("source:dragging")),this.originalSource.classList.remove(...this.getClassNamesFor("source:original")),this.originalSource.classList.add(...this.getClassNamesFor("source:placed")),this.sourceContainer.classList.add(...this.getClassNamesFor("container:placed")),this.sourceContainer.classList.remove(...this.getClassNamesFor("container:dragging")),document.body.classList.remove(...this.getClassNamesFor("body:dragging")),qr(document.body,""),this.currentOver&&this.currentOver.classList.remove(...this.getClassNamesFor("draggable:over")),this.currentOverContainer&&this.currentOverContainer.classList.remove(...this.getClassNamesFor("container:over")),this.lastPlacedSource=this.originalSource,this.lastPlacedContainer=this.sourceContainer,this.placedTimeoutID=setTimeout(()=>{this.lastPlacedSource&&this.lastPlacedSource.classList.remove(...this.getClassNamesFor("source:placed")),this.lastPlacedContainer&&this.lastPlacedContainer.classList.remove(...this.getClassNamesFor("container:placed")),this.lastPlacedSource=null,this.lastPlacedContainer=null},this.options.placedTimeout);const g=new tr({source:this.source,originalSource:this.originalSource,sensorEvent:c?c.sensorEvent:null,sourceContainer:this.sourceContainer});this.trigger(g),this.source=null,this.originalSource=null,this.currentOverContainer=null,this.currentOver=null,this.sourceContainer=null},this[zr]=c=>{this[H](c)},this[Ir]=c=>{if(!this.dragging)return;const d=lt(c),g=this.source||m(d.originalEvent.target,this.options.draggable),p=new Zn({sensorEvent:d,source:g,pressure:d.pressure});this.trigger(p)},e instanceof NodeList||e instanceof Array)this.containers=[...e];else if(e instanceof Element)this.containers=[e];else throw new Error("Draggable containers are expected to be of type `NodeList`, `Element[]` or `Element`");this.options={...go,...t,classes:{...ho,...(o=t.classes)!=null?o:{}},announcements:{...co,...(i=t.announcements)!=null?i:{}},exclude:{plugins:(a=(l=t.exclude)==null?void 0:l.plugins)!=null?a:[],sensors:(u=(h=t.exclude)==null?void 0:h.sensors)!=null?u:[]}},this[W]=this[W].bind(this),this[U]=this[U].bind(this),this[H]=this[H].bind(this),document.addEventListener("drag:start",this[le],!0),document.addEventListener("drag:move",this[at],!0),document.addEventListener("drag:stop",this[W],!0),document.addEventListener("drag:pressure",this[U],!0);const n=Object.values(ce.Plugins).filter(c=>!this.options.exclude.plugins.includes(c)),r=Object.values(ce.Sensors).filter(c=>!this.options.exclude.sensors.includes(c));this.addPlugin(...n,...this.options.plugins),this.addSensor(...r,...this.options.sensors);const s=new rr({draggable:this});this.on("mirror:created",({mirror:c})=>this.mirror=c),this.on("mirror:destroy",()=>this.mirror=null),this.trigger(s)}destroy(){document.removeEventListener("drag:start",this[le],!0),document.removeEventListener("drag:move",this[at],!0),document.removeEventListener("drag:stop",this[W],!0),document.removeEventListener("drag:pressure",this[U],!0);const e=new or({draggable:this});this.trigger(e),this.removePlugin(...this.plugins.map(t=>t.constructor)),this.removeSensor(...this.sensors.map(t=>t.constructor))}addPlugin(...e){const t=e.map(n=>new n(this));return t.forEach(n=>n.attach()),this.plugins=[...this.plugins,...t],this}removePlugin(...e){return this.plugins.filter(n=>e.includes(n.constructor)).forEach(n=>n.detach()),this.plugins=this.plugins.filter(n=>!e.includes(n.constructor)),this}addSensor(...e){const t=e.map(n=>new n(this.containers,this.options));return t.forEach(n=>n.attach()),this.sensors=[...this.sensors,...t],this}removeSensor(...e){return this.sensors.filter(n=>e.includes(n.constructor)).forEach(n=>n.detach()),this.sensors=this.sensors.filter(n=>!e.includes(n.constructor)),this}addContainer(...e){return this.containers=[...this.containers,...e],this.sensors.forEach(t=>t.addContainer(...e)),this}removeContainer(...e){return this.containers=this.containers.filter(t=>!e.includes(t)),this.sensors.forEach(t=>t.removeContainer(...e)),this}on(e,...t){return this.emitter.on(e,...t),this}off(e,t){return this.emitter.off(e,t),this}trigger(e){return this.emitter.trigger(e),this}cancel(){this[H]()}};let Y=ce;Yr=le,Pr=at,Nr=H,zr=W,Ir=U,Y.Plugins={Announcement:Ws,Focusable:Gs,Mirror:ro,Scrollable:lo},Y.Sensors={MouseSensor:Ie,TouchSensor:He};const Rr=class extends v{get droppable(){return this.data.droppable}get dragEvent(){return this.data.dragEvent}clone(e){return new Rr({...this.data,...e})}};let V=Rr;V.type="droppable";const kr=class extends V{get dropzone(){return this.data.dropzone}clone(e){return new kr({...this.data,...e})}};let de=kr;de.type="droppable:start",de.cancelable=!0;const Br=class extends V{get dropzone(){return this.data.dropzone}clone(e){return new Br({...this.data,...e})}};let he=Br;he.type="droppable:dropped",he.cancelable=!0;const jr=class extends V{get dropzone(){return this.data.dropzone}clone(e){return new jr({...this.data,...e})}};let ge=jr;ge.type="droppable:returned",ge.cancelable=!0;const Wr=class extends V{get dropzone(){return this.data.dropzone}clone(e){return new Wr({...this.data,...e})}};let ue=Wr;ue.type="droppable:stop",ue.cancelable=!0;var Ur,Hr,Vr,Gr,Kr,Zr,Jr;const pe=Symbol("onDragStart"),me=Symbol("onDragMove"),fe=Symbol("onDragStop"),Qr=Symbol("dropInDropZone"),ts=Symbol("returnToOriginalDropzone"),es=Symbol("closestDropzone"),ns=Symbol("getDropzones");function uo({dragEvent:e,dropzone:t}){const n=e.source.textContent.trim()||e.source.id||"draggable element",r=t.textContent.trim()||t.id||"droppable element";return`Dropped ${n} into ${r}`}function po({dragEvent:e,dropzone:t}){const n=e.source.textContent.trim()||e.source.id||"draggable element",r=t.textContent.trim()||t.id||"droppable element";return`Returned ${n} from ${r}`}const mo={"droppable:dropped":uo,"droppable:returned":po},fo={"droppable:active":"draggable-dropzone--active","droppable:occupied":"draggable-dropzone--occupied"},bo={dropzone:".draggable-droppable"};class vo extends Y{constructor(t=[],n={}){var r,s;super(t,{...bo,...n,classes:{...fo,...(r=n.classes)!=null?r:{}},announcements:{...mo,...(s=n.announcements)!=null?s:{}}}),this.dropzones=null,this.lastDropzone=null,this.initialDropzone=null,this[Ur]=o=>{if(o.canceled())return;this.dropzones=[...this[ns]()];const i=m(o.sensorEvent.target,this.options.dropzone);if(!i){o.cancel();return}const l=new de({dragEvent:o,dropzone:i});if(this.trigger(l),l.canceled()){o.cancel();return}this.initialDropzone=i;for(const a of this.dropzones)a.classList.contains(this.getClassNameFor("droppable:occupied"))||a.classList.add(...this.getClassNamesFor("droppable:active"))},this[Hr]=o=>{if(o.canceled())return;const i=this[es](o.sensorEvent.target);i&&!i.classList.contains(this.getClassNameFor("droppable:occupied"))&&this[Qr](o,i)?this.lastDropzone=i:(!i||i===this.initialDropzone)&&this.lastDropzone&&(this[ts](o),this.lastDropzone=null)},this[Vr]=o=>{const i=new ue({dragEvent:o,dropzone:this.lastDropzone||this.initialDropzone});this.trigger(i);const l=this.getClassNamesFor("droppable:occupied");for(const a of this.dropzones)a.classList.remove(...this.getClassNamesFor("droppable:active"));this.lastDropzone&&this.lastDropzone!==this.initialDropzone&&this.initialDropzone.classList.remove(...l),this.dropzones=null,this.lastDropzone=null,this.initialDropzone=null},this[Gr]=(o,i)=>{const l=new he({dragEvent:o,dropzone:i});if(this.trigger(l),l.canceled())return!1;const a=this.getClassNamesFor("droppable:occupied");return this.lastDropzone&&this.lastDropzone.classList.remove(...a),i.appendChild(o.source),i.classList.add(...a),!0},this[Kr]=o=>{const i=new ge({dragEvent:o,dropzone:this.lastDropzone});this.trigger(i),!i.canceled()&&(this.initialDropzone.appendChild(o.source),this.lastDropzone.classList.remove(...this.getClassNamesFor("droppable:occupied")))},this[Zr]=o=>this.dropzones?m(o,this.dropzones):null,this[Jr]=()=>{const o=this.options.dropzone;return typeof o=="string"?document.querySelectorAll(o):o instanceof Array?o:typeof o=="function"?[o()]:[o]},this.on("drag:start",this[pe]).on("drag:move",this[me]).on("drag:stop",this[fe])}destroy(){super.destroy(),this.off("drag:start",this[pe]).off("drag:move",this[me]).off("drag:stop",this[fe])}}Ur=pe,Hr=me,Vr=fe,Gr=Qr,Kr=ts,Zr=es,Jr=ns;const rs=class extends v{get dragEvent(){return this.data.dragEvent}clone(e){return new rs({...this.data,...e})}};let G=rs;G.type="swappable";const ss=class extends G{clone(e){return new ss({...this.data,...e})}};let be=ss;be.type="swappable:start",be.cancelable=!0;const os=class extends G{get over(){return this.data.over}get overContainer(){return this.data.overContainer}clone(e){return new os({...this.data,...e})}};let ve=os;ve.type="swappable:swap",ve.cancelable=!0;const is=class extends G{get swappedElement(){return this.data.swappedElement}clone(e){return new is({...this.data,...e})}};let as=is;as.type="swappable:swapped";const ls=class extends G{clone(e){return new ls({...this.data,...e})}};let cs=ls;cs.type="swappable:stop";const K=Symbol("onDragStart"),Z=Symbol("onDragOver"),J=Symbol("onDragStop");function Eo({dragEvent:e,swappedElement:t}){var s,o;const n=((s=e.source.textContent)==null?void 0:s.trim())||e.source.id||"swappable element",r=((o=t.textContent)==null?void 0:o.trim())||t.id||"swappable element";return`Swapped ${n} with ${r}`}function So(e){const t=document.createElement("div");e(t),t.remove()}function ds(e,t){const n=t.parentNode,r=e.parentNode;So(s=>{r.insertBefore(s,e),n.insertBefore(e,t),r.insertBefore(t,s)})}const yo={"swappabled:swapped":Eo};class Co extends Y{constructor(t=[],n={}){var r;super(t,{...n,announcements:{...yo,...(r=n.announcements)!=null?r:{}}}),this.lastOver=null,this[K]=this[K].bind(this),this[Z]=this[Z].bind(this),this[J]=this[J].bind(this),this.on("drag:start",this[K]).on("drag:over",this[Z]).on("drag:stop",this[J])}destroy(){super.destroy(),this.off("drag:start",this[K]).off("drag:over",this[Z]).off("drag:stop",this[J])}[K](t){const n=new be({dragEvent:t});this.trigger(n),n.canceled()&&t.cancel()}[Z](t){if(t.over===t.originalSource||t.over===t.source||t.canceled())return;const n=new ve({dragEvent:t,over:t.over,overContainer:t.overContainer});if(this.trigger(n),n.canceled())return;this.lastOver&&this.lastOver!==t.over&&ds(this.lastOver,t.source),this.lastOver===t.over?this.lastOver=null:this.lastOver=t.over,ds(t.source,t.over);const r=new as({dragEvent:t,swappedElement:t.over});this.trigger(r)}[J](t){const n=new cs({dragEvent:t});this.trigger(n),this.lastOver=null}}const hs=class extends v{get dragEvent(){return this.data.dragEvent}clone(e){return new hs({...this.data,...e})}};let Q=hs;Q.type="sortable";const gs=class extends Q{get startIndex(){return this.data.startIndex}get startContainer(){return this.data.startContainer}clone(e){return new gs({...this.data,...e})}};let Ee=gs;Ee.type="sortable:start",Ee.cancelable=!0;const us=class extends Q{get currentIndex(){return this.data.currentIndex}get over(){return this.data.over}get overContainer(){return this.data.dragEvent.overContainer}get dragEvent(){return this.data.dragEvent}clone(e){return new us({...this.data,...e})}};let ct=us;ct.type="sortable:sort",ct.cancelable=!0;const ps=class extends Q{get dragEvent(){return this.data.dragEvent}get oldIndex(){return this.data.oldIndex}get newIndex(){return this.data.newIndex}get oldContainer(){return this.data.oldContainer}get newContainer(){return this.data.newContainer}clone(e){return new ps({...this.data,...e})}};let Se=ps;Se.type="sortable:sorted";const ms=class extends Q{get oldIndex(){return this.data.oldIndex}get newIndex(){return this.data.newIndex}get oldContainer(){return this.data.oldContainer}get newContainer(){return this.data.newContainer}clone(e){return new ms({...this.data,...e})}};let fs=ms;fs.type="sortable:stop";var bs,vs,Es,Ss;const ye=Symbol("onDragStart"),Ce=Symbol("onDragOverContainer"),we=Symbol("onDragOver"),De=Symbol("onDragStop");function wo({dragEvent:e}){var n,r,s,o,i,l;const t=(s=(r=(n=e.source.textContent)==null?void 0:n.trim())!=null?r:e.source.id)!=null?s:"sortable element";if(e.over){const a=(l=(i=(o=e.over.textContent)==null?void 0:o.trim())!=null?i:e.over.id)!=null?l:"sortable element";return e.source.compareDocumentPosition(e.over)&Node.DOCUMENT_POSITION_FOLLOWING?`Placed ${t} after ${a}`:`Placed ${t} before ${a}`}else return`Placed ${t} into a different container`}const ys=e=>{var t;return Array.prototype.indexOf.call((t=e.parentNode)==null?void 0:t.children,e)};function Do(e,t){const n=e.parentNode;return t.appendChild(e),{oldContainer:n,newContainer:t}}function xo(e,t){var s,o;const n=ys(e),r=ys(t);return n<r?(s=e.parentNode)==null||s.insertBefore(e,t.nextElementSibling):(o=e.parentNode)==null||o.insertBefore(e,t),{oldContainer:e.parentNode,newContainer:e.parentNode}}function Oo(e,t,n){var s;const r=e.parentNode;return t?(s=t.parentNode)==null||s.insertBefore(e,t):n.appendChild(e),{oldContainer:r,newContainer:e.parentNode}}function Cs({source:e,over:t,overContainer:n,children:r}){const s=!r.length,o=e.parentNode!==n,i=t&&e.parentNode===t.parentNode;return s?Do(e,n):i?xo(e,t):o?Oo(e,t,n):null}const Mo={"sortable:sorted":wo};class $o extends Y{constructor(t=[],n={}){var r;super(t,{...n,announcements:{...Mo,...(r=n.announcements)!=null?r:{}}}),this[bs]=s=>{this.startContainer=s.source.parentNode,this.startIndex=this.index(s.source);const o=new Ee({dragEvent:s,startIndex:this.startIndex,startContainer:this.startContainer});this.trigger(o),o.canceled()&&s.cancel()},this[vs]=s=>{if(s.canceled())return;const{source:o,over:i,overContainer:l}=s,a=this.index(o),h=new ct({dragEvent:s,currentIndex:a,source:o,over:i});if(this.trigger(h),h.canceled())return;const u=this.getSortableElementsForContainer(l),c=Cs({source:o,over:i,overContainer:l,children:u});if(!c)return;const{oldContainer:d,newContainer:g}=c,p=this.index(s.source),f=new Se({dragEvent:s,oldIndex:a,newIndex:p,oldContainer:d,newContainer:g});this.trigger(f)},this[Es]=s=>{if(s.over===s.originalSource||s.over===s.source)return;const{source:o,over:i,overContainer:l}=s,a=this.index(o),h=new ct({dragEvent:s,currentIndex:a,source:o,over:i});if(this.trigger(h),h.canceled())return;const u=this.getDraggableElementsForContainer(l),c=Cs({source:o,over:i,overContainer:l,children:u});if(!c)return;const{oldContainer:d,newContainer:g}=c,p=this.index(o),f=new Se({dragEvent:s,oldIndex:a,newIndex:p,oldContainer:d,newContainer:g});this.trigger(f)},this[Ss]=s=>{const o=new fs({dragEvent:s,oldIndex:this.startIndex,newIndex:this.index(s.source),oldContainer:this.startContainer,newContainer:s.source.parentNode});this.trigger(o),this.startIndex=null,this.startContainer=null},this.on("drag:start",this[ye]).on("drag:over:container",this[Ce]).on("drag:over",this[we]).on("drag:stop",this[De])}destroy(){super.destroy(),this.off("drag:start",this[ye]).off("drag:over:container",this[Ce]).off("drag:over",this[we]).off("drag:stop",this[De])}index(t){return this.getSortableElementsForContainer(t.parentNode).indexOf(t)}getSortableElementsForContainer(t){return[...t.querySelectorAll(this.options.draggable)].filter(r=>r!==this.originalSource&&r!==this.mirror&&r.parentNode===t)}}bs=ye,vs=Ce,Es=we,Ss=De,b.BaseEvent=v,b.BasePlugin=S,b.Draggable=Y,b.Droppable=vo,b.Plugins=Ps,b.Sensors=_s,b.Sortable=$o,b.Swappable=Co,Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
